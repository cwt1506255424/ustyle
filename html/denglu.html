<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>用户登录</title>
<link href="../css/public.css" rel="stylesheet" type="text/css">
<link href="../css/denglu.css" rel="stylesheet" type="text/css">
</head>
<body>
<header>
	<div class="header-inner clear">
    	<h2 class="logo"><a href="index.html"><img src="../images/logo-en.png"/></a></h2>
        <ul class="header-tool">
            <li><span>Hi~</span><a href="denglu.html">[请登录]</a><a href="zhuce.html">[免费注册]</a></li>
            <li class="has"><span><a href="denglu.html">MY有货</a><img class="san" src="../images/sanjiao.png"/>
            <div id="hasTool" class="tool-select">
            	<a href="denglu.html">我的收藏</a><a href="denglu.html">优惠券</a>
            </div>
            </li>
            
            <li><a href="#">订单中心</a></li>
            <li class="client"><span><a href="#">客户服务</a></span><img class="san" src="../images/sanjiao.png"/>
            <div id="tool-select" class="tool-select">
            	<a href="#">在线客服</a><a href="#">帮助中心</a>
            </div>
            </li>
        </ul>
    </div>
</header>
<section id="logIn" class="margin">
	<div class="passport">
    	<div class="cover">
        	<a href="#"><img src="../images/img1.jpg"/></a>
        </div>
    </div>
    <div class="content">
    	<ul class="log">
        	<div class="select">
            	<div id="device"></div>
                <div class="type-tip">
                	<div id="device-tip1" class="device-tip">密码登录在这里</div>
                	<div id="device-tip2" class="device-tip" style="display:none;">扫码登录更安全</div>
                </div>
            </div>
            <div class="mobile-login">
            	<li class="logTitle"><div>手机扫码，安全登录</div></li>
                <li class="center">
                	<div id="placeholder"></div>
                    
                </li>
                <li class="relative">
                	<div>
                    	<i class="scan"></i>
                        <p class="scan-font">打开手机Yoho!Buy有货</p>
                        <p class="scan-font">扫一扫登录</p>
                    </div>
                </li>
                <li class="relative">
                	<div class="center">
                    	<a href="#" class="download-link">下载Yoho!Buy有货手机APP</a>
                    </div>
                </li>
            </div>
			<div class="desktop-login">
				<li class="relative clear">
					<h2 class="title">会员登录</h2>
					<span id="country-code" class="country-code">
						<em id="guojia">中国 +86</em><i class="iconfont"><img src="../images/xiajiantou.png"/></i>
						<ul id="country-list" class="country-list">
							<li>澳大利亚 +61</li>
							<li>韩国 +82</li>
							<li>加拿大 +1</li>
							<li>马来西亚 +60</li>
							<li>美国 +1</li>
							<li>日本 +81</li>
							<li>新加坡 +65</li>
							<li>英国 +61</li>
							<li selected="selected">中国 +86</li>
							<li>中国澳门 +853</li>
							<li>中国台湾 +886</li>
							<li>新加坡 +65</li>
							<li>中国香港 +852</li>
						</ul>
						
					</span>
				</li>
				<li class="relative">
					<div class="switch clear">
						<div id="putongdenglu" class="selected">普通登录</div>				
						<div id="shoujiyanzheng" class="right">手机验证码登录</div>				
					</div>
				</li>
				<li class="relative yincang">
					<input id="userId" class="input user" type="text" placeholder="请输入用户名"  name="userName"/>
					<span id="err-tip" class="err-tip" style="top:0px"></span>
					
				</li>				
				
				</li>
				<li class="relative yincang">
					<input id="password" class="input" type="password" maxlength="20" placeholder="密码"/>
				
				</li>               
                <li id="ph" class="ph">
                	<input id="phone" class="input1" value="" placeholder="手机号码" type="text"  />
					<span id="tips" class="tips"></span>
			   </li>
                <li id="check">
                	<div class="img-check">
                    	<div class="img-check-t clear">
                        	<span>请将下列图片点击翻转至正确方向</span>
                            <a href="#" onclick="reImg()" class="img-check-refresh">换一批</a>
                        </div>
                        <div class="img-check-b">
							<ul id="img-check-pics" class="img-check-pics">
								<li class="img-check-pic" onclick="changePosition()" style="background-position-x:0px;background-position-y:0px;"></li>
								<li class="img-check-pic" onclick="changePosition()" style="background-position-x:-60px;background-position-y:-60px;"></li>
								<li class="img-check-pic" onclick="changePosition()" style="background-position-x:-120px;background-position-y:-120px;"></li>
								<li class="img-check-pic" onclick="changePosition()" style="background-position-x:-180px;background-position-y:-180px;"></li>
							</ul>
							<span id="img-check-tip" class="img-check-tip"></span> 
						</div>
                    </div>
                </li>
				<li id="yanzhengCode" class="clear chec-code">
						<input id="message" class="input message" type="text" placeholder="短信验证码" maxlength="4"/>
						<input id="send" class="send" value="获取短信验证码" type="button" onclick="changeyzm()" /><span id="span"></span> 
						<span  id="tips1" class="tips" ></span>
				</li>
				
				<li class="relative">
					<a ><span id="btnLogin" class="login-btn">登录</span></a>
					<span id="errmsg"></span>
				</li>
				<li class="other-opts">
					<span class="remember-me">
						<input  type="checkbox" checked="checked"/>
						
						记住登录状态</span>
					<span class="right">
						<a href="#" class="forget-password">忘记密码? |</a>
						<a href="#" class="fast-reg">快速注册</a>
					</span>
				</li>
				<li class="third-party-login">
					<a href="#" class="forget-password"><span class="icon weixin"></span></a>
					<a href="#" class="forget-password"><span class="icon qq"></span></a>
					<a href="#" class="forget-password"><span class="icon weibo"></span></a>
					<a href="#" class="forget-password"><span class="icon alipay"></span></a>
					<a href="#" class="forget-password"><span class="icon douban"></span></a>
					<a href="#" class="forget-password"><span class="icon renren"></span></a>			
				</li>
			</div>
			
		
        </ul>
    </div>
</section>
<footer>
	<div id="footer-t" class="margin clear">
    	<div class="left">
        	<i class="iconfont"><img src="../images/zheng.png"/></i><span class="red">100%</span><span class="rpzp">品牌正品</span>
        </div>
        <div class="left">
        	<i class="iconfont"><img src="../images/seven.png"/></i><span class="red">7天</span><span class="rpzp">无理由退换货</span>
        </div>
        <div class="left">
        	<i class="iconfont"><img src="../images/weixin.png"/></i><span class="red">便捷</span><span class="rpzp">在线客服</span>
        </div>
        <div class="right">
        	<input type="text" value="订阅我们的邮件"><a href="#"><i class="iconfont"><img src="../images/youjian.png"/></i></a>
        </div>
    </div>
	<div id="footer-m" class="margin">
    	<ul>
        	<li>
            	<p><span>新手专区</span></p>
                <p><a href="#">注册登录</a></p>
                <p><a href="#">购物结算</a></p>
                <p><a href="#">下单支付</a></p>
                <p><a href="#">收货评价</a></p>
            </li>
        	<li>
            	<p><span>会员中心</span></p>
                <p><a href="#">会员制度</a></p>
                <p><a href="#">会员优惠</a></p>
                <p><a href="#">账户管理</a></p>
                <p><a href="#">密码管理</a></p>
            </li>
            <li>
            	<p><span>购物指南</span></p>
                <p><a href="#">发票</a></p>
                <p><a href="#">尺码对照</a></p>
                <p><a href="#">尺码解读</a></p>
                <p><a href="#">商品咨询</a></p>
            </li>
            <li>
            	<p><span>支付方式</span></p>
                <p><a href="#">在线支付</a></p>
                <p><a href="#">货到付款</a></p>
                <p><a href="#">分期支付</a></p>
                <p><a href="#">优惠券、有货币</a></p>
            </li>
            <li>
            	<p><span>配送方式</span></p>
                <p><a href="#">配送说明</a></p>
                <p><a href="#">运费说明</a></p>
                <p><a href="#">验货签收</a></p>
                <p><a href="#">收货样品</a></p>
            </li>
            <li>
            	<p><span>售后服务</span></p>
                <p><a href="#">退换货政策</a></p>
                <p><a href="#">退换货流程</a></p>
                <p><a href="#">投诉与建议</a></p>
                <p><a href="#">在线客服</a></p>
            </li>
            <li>
            	<p><span>APP常见问题</span></p>
                <p><a href="#">IPhone版</a></p>
                <p><a href="#">Android版</a></p>
                <p><a href="#">wap版</a></p>
                <p><a href="#">IPAD版</a></p>
            </li>
        </ul>
    </div>
    <div id="footer-b" class="margin clear">
    	<a href="#"><img src="../images/footer1.png"/></a>
        <a href="#"><img src="../images/footer2.png"/></a>
        <a href="#"><img src="../images/footer3.png"/></a>
        <div class="about">
        	<p><a href="#">返回首页</a><span>|</span><a href="#">YOHO!BUY 有货</a><span>|</span><a href="#">新力传媒</a><span>|</span><a href="#">联系我们</a><span>|</span><a href="#">商家入驻</a><span>|</span><a href="#">隐私条款</a><span>|</span><a href="#">友情链接</a></p>
            <p>CopyRight &copy;2007-2016 南京新与力文化传播有限公司<a href="#">苏ICP备09011225号</a>NewPower Co. 版权所有 经营许可证编号：苏B2-20120395</p>
        </div>
    </div>
</footer>
<div id="show">
    <div class="qrcode-hover-box">
        <a href="#" class="layer-box"><span class="qrcode-img"></span></a>
        <div id="focusLeft" class="valign">
            <img src="../images/wechat.png" />
            <h5 class="qr-words">微信扫一扫</h5>
            <h5 class="qr-words">关注公众号，赢免单</h5>
        </div>
        <div id="downLoadAppRight" class="valign">
            <img src="../images/mobile.png" />
            <h5 class="qr-words">下载手机客户端</h5>
            <h5 class="qr-words">更多客户端</h5>
        </div>
    </div>
    
    <a href="denglu.html"><div class="return-top">^</div></a>
</div>

</body>
</html>
<script type="text/javascript" src="../js/tools.js"></script>
<script type="text/javascript" src="../js/jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="../js/cookieTools.js" ></script>
<script type="text/javascript">
function changeyzm(){
	var i=0;
	var str="";
	while(i<4){
		var num1=parseInt(Math.random()*123);
		if((num1>=48 && num1<=57)||(num1>=65 && num1<=90)||(num1>=97 && num1<=122)){
			str+=String.fromCharCode(num1);
			i++;
		}
	}
	$("span").innerHTML=str;	
}
//改变验证码
function reImg(){
	var img = document.getElementsByClassName("img-check-pic");
	for(var i=0;i<img.length;i++){
		var num=parseInt(Math.random()*4)*60;
		console.log(num);
		img[i].style.cssText="background-position-x:-"+num+"px;background-position-y:-"+num+"px;"; 
	} 
}
var ord=0;
function changePosition(event){
	var e=event||window.event;
	console.log(e.target);
	ord+=60;
	if(ord>180){
		ord=0;
	}
	e.target.style.backgroundPositionX=-ord+"px";
}
function changePosition(event){
	var e=event||window.event;
	console.log(e.target);
	ord+=60;
	if(ord>180){
		ord=0;
	}
	e.target.style.backgroundPositionX=-ord+"px";
}
function changePosition(event){
	var e=event||window.event;
	console.log(e.target);
	ord+=60;
	if(ord>180){
		ord=0;
	}
	e.target.style.backgroundPositionX=-ord+"px";
}
function changePosition(event){
	var e=event||window.event;
	console.log(e.target);
	ord+=60;
	if(ord>180){
		ord=0;
	}
	e.target.style.backgroundPositionX=-ord+"px";
}
function changeyzm(){
	var imgs=document.getElementById("img-check-pics");
	var po0x=parseInt(imgs.children[0].style.backgroundPositionX);
	var po0y=parseInt(imgs.children[0].style.backgroundPositionY);
	var po1x=parseInt(imgs.children[1].style.backgroundPositionX);
	var po1y=parseInt(imgs.children[1].style.backgroundPositionY);
	var po2x=parseInt(imgs.children[2].style.backgroundPositionX);
	var po2y=parseInt(imgs.children[2].style.backgroundPositionY);
	var po3x=parseInt(imgs.children[3].style.backgroundPositionX);
	var po3y=parseInt(imgs.children[3].style.backgroundPositionY);
	if(po0x==-60&&po0y==0){
		if(po1x==-180&&po1y==-60){
			if(po2x==-120&&po2y==-120){
				if(po3x==0&&po3y==-180){
					var i=0;
					var str="";
					while(i<4){
						var num1=parseInt(Math.random()*123);
						if((num1>=48 && num1<=57)||(num1>=65 && num1<=90)||(num1>=97 && num1<=122)){
							str+=String.fromCharCode(num1);
							i++;
						}
					}
					$("span").innerHTML=str;
					$("img-check-tip").innerHTML="";	
				}
			}
		}			
	}else{
		$("img-check-tip").innerHTML="请将图形验证码翻转至正确方向";	
	}
	
}
//引入类库，使用类库中的正则封装函数验证表单 
window.onload=function(){
	$("putongdenglu").onclick=function(){
		$("putongdenglu").style.cssText="background-image:url(../images/sprite.passport.png);background-position:-311px -29px;color:#fff;";
		//$("shoujiyanzheng").style.cssText="background-image:url(../images/sprite.passport.png);background-position:-311px 0px;color:#000;";
		$("shoujiyanzheng").style.cssText="background-image:none";
	}
	$("shoujiyanzheng").onclick=function(){
		$("shoujiyanzheng").style.cssText="background-image:url(../images/sprite.passport.png);background-position:-311px -29px;color:#fff;";
		$("putongdenglu").style.cssText="background-image:url(../images/sprite.passport.png);background-position:-311px 0px;color:#000;";
	}
	$("phone").onblur=function(){//失去光标事件	
		var phone=$("phone").value;
		var phonetishi=checkAll("Phone",phone);
		if(phone==""){
			$("err-tip").style.cssText="display:block;top:210px;left:775.5px;";
			$("tips").innerHTML="请输入手机号码";
			return false;
		}else{
			$("err-tip").style.cssText="display:none";
			$("tips").innerHTML="";
		}
		if(!phonetishi){
			$("err-tip").style.cssText="display:block;top:210px;left:775.5px;";
			$("tips").innerHTML="手机号码格式不正确,请重新输入";
			$("phone").style.cssText="border-color:red";
			return false;
		}else{
			$("tips").innerHTML="";
			$("err-tip").style.cssText="display:none";
			$("phone").style.cssText="border-color:#dbdbdb;";
		}
	}

	$("message").onblur=function(){//验证码只能是4位数字字母			
		var message=$("message").value;
		var span=$("span").innerHTML;
		showCode=message.toLowerCase();//全部转小写
		span=span.toLowerCase();
		var showCodetishi=checkAll("showCode",message);
		if(message==""){
			$("err-tip").style.cssText="display:block;top:392px;left:716.5px;";
			$("tips1").innerHTML="请输入验证码";
			return false;
		}else{
			$("err-tip").style.cssText="display:none";
			$("tips1").innerHTML="";
			$("message").style.cssText="border-color:#dbdbdb";
		}
		if(!showCodetishi){
			$("err-tip").style.cssText="display:block;top:392px;left:716.5px;";
			$("tips1").innerHTML="短信验证码错误";
			$("message").style.cssText="border-color:red";
			return false;
		}else if(span!=showCode){
			$("err-tip").style.cssText="display:block;top:392px;left:716.5px;";
			$("tips1").innerHTML="验证码错误";
			$("message").style.cssText="border-color:red";
		}else{

			$("err-tip").style.cssText="display:block;top:392px;left:716.5px;";
			$("tips1").innerHTML="通过验证";
			$("message").style.cssText="border-color:#dbdbdb;";			
		}	
	}
	$("userId").onblur=function(){//失去光标事件	
		var userId=$("userId").value;
		var userIdtishi=checkAll("username",userId);
		if(userId==""){
			$("err-tip").style.cssText="display:block;top:8px;left:285px;";
			$("err-tip").innerHTML="请输入用户名";
			return false;
		}else{
			$("err-tip").style.cssText="display:none";
		}
		if(!userIdtishi){
			$("err-tip").style.cssText="display:block;top:0px;left:285px;";
			$("err-tip").innerHTML="用户名只能使用数字字母下划线";
			$("userId").style.cssText="border-color:red";
			return false;
		}else{
			$("err-tip").style.cssText="display:none";
			$("userId").style.cssText="border-color:#dbdbdb;";
		}
	}
	$("password").onblur=function(){//失去光标事件	
		var password=$("password").value;
		var pwdtishi=checkAll("password",password);
		if(password==""){
			$("err-tip").style.cssText="display:block;top:70px;left:285px;";
			$("err-tip").innerHTML="请输入密码";
			return false;
		}else{
			$("err-tip").innerHTML="请输入长度为6-20字符的密码";
		}
		if(!pwdtishi){
			$("err-tip").style.cssText="display:block;top:70px;left:285px;";
			$("err-tip").innerHTML="密码格式不正确，请重新输入";
			$("password").style.cssText="border-color:red";
			return false;
		}else{
			$("err-tip").innerHTML="";
			$("password").style.cssText="border-color:#dbdbdb;";
		}
	}

	$("btnLogin").onclick=function(){
		var uname=$("userId").value;
		var upws=$("password").value;
		var date=new Date();
		date.setDate(date.getDate()+7);
		document.cookie="uname="+uname+"; expires="+date.toGMTString();
		document.cookie="upws="+upws+"; expires="+date.toGMTString();
	};
//页面加载时读取cookie
	var arr=document.cookie.split("; ");//uname=zhang
	var uname,upws;
	for(var i in arr){//uname=zhang
		var item=arr[i].split("=");//[uname,zhang]
		if(item[0]=="uname"){
			uname=item[1];
		}
		if(item[0]=="upws"){
			upws=item[1];
		}
	}


}


var jq = $.noConflict();

jq("#btnLogin").click(function(){
	jq.ajax({
		url:"../php/loginCheck.php",
		async:true,
		data:"userName="+jq('#userId').val()+"&userPass="+jq("#password").val(),
		type:"post",
		success:function(data){
			if(data=="1"){
				//保存cookie
				setCookie("userName",jq('#userId').val(),7);
				console.log(getCookie("userName"));
				
				location.href="index.html";
			}else{
				jq("#errmsg").html("亲，用户名或者密码错误，登录失败，请想好再输！");
			}
		}		
	});	
});
//国家码显示
jq(function(){	
	jq("#guojia").click(function(){
		jq(".country-list").toggle(300);
	});
});
//国家码选择
	jq("#country-list").delegate("li","click",function(){
		jq("#guojia")[0].innerHTML=this.innerHTML;
		jq("#country-list").toggle(500);
	});
//显示/隐藏密码登录
jq(function(){	
	jq("#device").click(function(){
		jq(".mobile-login").toggle();
		jq("#device-tip1").toggle();
		jq(".desktop-login").toggle();
		jq("#device-tip2").toggle();
	});
});

//点击普通登录，普通登录显示
jq("#putongdenglu").on("click", function() {
	jq('.yincang').show();
	jq('#ph').hide();
	jq('#check').hide();
	jq('#yanzhengCode').hide();
	
})

//点击手机验证，显示手机验证
jq("#shoujiyanzheng").on("click", function(){
	jq('#ph').show();
	jq('#check').show();
	jq('#yanzhengCode').show();
	jq('.yincang').hide();
	
})

 
//MY有货下拉菜单显示
jq(".has").on("mouseenter", function() {
                jq('#hasTool').show();
            })
jq(".has").on("mouseleave", function() {
                jq('#hasTool').hide();
            });
jq("#hasTool").on("mouseenter", function() {
                jq(this).show();
            })
jq("#hasTool").on("mouseleave", function() {
                jq(this).hide();
            });
//客户服务下拉菜单显示		
jq(".client").on("mouseenter", function() {
                jq('#tool-select').show();
            })
jq(".client").on("mouseleave", function() {
                jq('#tool-select').hide();
            });
jq("#tool-select").on("mouseenter", function() {
                jq(this).show();
            })
jq("#tool-select").on("mouseleave", function() {
                jq(this).hide();
            });
//二维码显示
jq(".qrcode-hover-box").on("mouseenter", function() {
                jq('#focusLeft').show();
                jq('#downLoadAppRight').show();
            })
jq(".qrcode-hover-box").on("mouseleave", function() {
                jq('#focusLeft').hide();
                jq('#downLoadAppRight').hide();
            });
jq("#focusLeft").on("mouseenter", function() {
                jq(this).show();
            })
jq("#downLoadAppRight").on("mouseenter", function() {
                jq(this).show();
            })
jq("#focusLeft").on("mouseleave", function() {
                jq(this).hide();
            });
jq("#downLoadAppRight").on("mouseleave", function() {
                jq(this).hide();
            });
//滚动一定高度，显示toTop
function show(){
	var mytop =jq(document).scrollTop();
	if (mytop>80){
		jq("#show").css({'display':'block'});
	} else if(mytop<=30){
		jq("#show").css({'display':'none'});
	}
	setTimeout(show);
}
show();
</script>
